title: Turf Management v3
views:

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # VIEW 1: DASHBOARD
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - title: Dashboard
    path: lawn
    icon: mdi:grass
    badges: []
    type: masonry
    theme: Mushroom
    background:
      opacity: 100
      alignment: center
      size: cover
      repeat: no-repeat
      attachment: fixed
      image:
        media_content_id: /local/turf_bg.svg
        media_content_type: ''
        metadata:
          navigateIds:
            - {}
            - media_content_type: ''
              media_content_id: __MANUAL_ENTRY__
    card_mod:
      style:
        .: |
          :host {
            --primary-background-color: #0e1614;
            --secondary-background-color: #162019;
            --card-background-color: #1c2b22;
            --primary-text-color: #e8f5eb;
            --secondary-text-color: #8fb89a;
            --primary-color: #4aa35b;
            --accent-color: #6fcf80;
            --divider-color: rgba(74,163,91,0.25);
            --disabled-text-color: #4d7058;
            --paper-item-icon-color: #4aa35b;
            --slider-color: #4aa35b;
            --switch-checked-color: #4aa35b;
          }
    cards:

      # â”€â”€ Lawn Configuration â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## âš™ï¸ Lawn Configuration
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase;
                     letter-spacing: 0.14em !important; color: #4aa35b !important; margin: 0 0 12px 0 !important;
                     border-bottom: 1px solid rgba(74,163,91,0.2); padding-bottom: 8px; }
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-select-card
                entity: input_select.lawn_type
                icon: mdi:grass
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important;
                              border-radius: 14px !important; box-shadow: none !important; }
              - type: custom:mushroom-template-card
                primary: Total Lawn Area
                secondary: '{{ states(''sensor.lawn_total_area'') }}mÂ²'
                icon: mdi:texture-box
                icon_color: green
                tap_action:
                  action: none
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important;
                              border-radius: 14px !important; box-shadow: none !important; }
                    .primary { color: #e8f5eb !important; }

                    .secondary { color: #8fb89a !important; font-family:
                    monospace !important; }

      # â”€â”€ Microclimate & GDD Tracking â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸŒ¡ï¸ Microclimate & GDD Tracking
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase;
                     letter-spacing: 0.14em !important; color: #4aa35b !important; margin: 0 0 12px 0 !important;
                     border-bottom: 1px solid rgba(74,163,91,0.2); padding-bottom: 8px; }
          - type: custom:mini-graph-card
            entities:
              - entity: sensor.weatherflow_sensors_temperature
                name: Current
                color: '#4aa35b'
              - entity: input_number.lawn_temp_daily_max
                name: Max
                show_state: true
                color: '#e07843'
              - entity: input_number.lawn_temp_daily_min
                name: Min
                show_state: true
                color: '#4da6d4'
            name: Temperature â€” 48hr
            hours_to_show: 48
            line_width: 2.5
            font_size: 75
            animate: true
            show:
              labels: true
              points: false
              legend: true
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important;
                          border-radius: 16px !important; box-shadow: none !important; }
          - type: custom:mushroom-template-card
            primary: PGR Accumulated Progress
            secondary: |-
              {{ states('input_number.pgr_gdd_accumulated') | round(0) }} / {{
              states('input_number.pgr_gdd_target') | round(0) }} GDD (+{{
              states('sensor.lawn_gdd_today') }} Today)
            icon: mdi:chart-timeline-variant
            icon_color: |
              {% set acc = states('input_number.pgr_gdd_accumulated') | float(0)
              %} {% set tgt = states('input_number.pgr_gdd_target') | float(1)
              %} {% if acc >= tgt %} red {% elif acc >= (tgt * 0.8) %} orange {%
              else %} green {% endif %}
            tap_action:
              action: more-info
              entity: input_number.pgr_gdd_accumulated
            card_mod:
              style: >
                ha-card { 
                  background: linear-gradient(to right, rgba(74,163,91,0.3) {{ (states('input_number.pgr_gdd_accumulated')|float(0) / states('input_number.pgr_gdd_target')|float(1) * 100) | round(0) }}%, #1c2b22 {{ (states('input_number.pgr_gdd_accumulated')|float(0) / states('input_number.pgr_gdd_target')|float(1) * 100) | round(0) }}%) !important;
                  border: 1px solid rgba(74,163,91,0.18) !important;
                  border-radius: 14px !important; 
                  box-shadow: none !important; 
                }

                .primary { color: #e8f5eb !important; font-weight: 600
                !important; }

                .secondary { color: #8fb89a !important; font-family: monospace
                !important; }

      # â”€â”€ Spray Conditions & PGR Forecast â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸŒ¤ï¸ Spray Conditions & PGR Forecast
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase;
                     letter-spacing: 0.14em !important; color: #4aa35b !important; margin: 0 0 12px 0 !important;
                     border-bottom: 1px solid rgba(74,163,91,0.2); padding-bottom: 8px; }
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: Spray Conditions
                secondary: |
                  {{ states('sensor.lawn_spray_conditions') }} Wind: {{
                  states('sensor.lawn_wind_speed_forecast') }}km/h Rain: {{
                  states('sensor.lawn_rain_forecast') }}mm
                icon: |
                  {% set cond = states('sensor.lawn_spray_conditions') %} {% if
                  cond == 'Good' %}mdi:check-circle {% elif cond == 'Marginal'
                  %}mdi:alert-circle {% else %}mdi:close-circle{% endif %}
                icon_color: |
                  {% set cond = states('sensor.lawn_spray_conditions') %} {% if
                  cond == 'Good' %}green {% elif cond == 'Marginal' %}orange {%
                  else %}red{% endif %}
                tap_action:
                  action: more-info
                  entity: sensor.lawn_spray_conditions
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important;
                              border-radius: 14px !important; box-shadow: none !important; }
                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #8fb89a !important; font-size: 11px
                    !important; line-height: 1.4 !important; }
              - type: custom:mushroom-template-card
                primary: PGR Forecast
                secondary: |
                  Target: {{ states('sensor.lawn_pgr_forecast_date') }} (~{{
                  states('sensor.lawn_pgr_days_until') }} days) 5-day GDD: {{
                  states('sensor.lawn_gdd_projection_5day') }}
                icon: mdi:calendar-star
                icon_color: purple
                tap_action:
                  action: more-info
                  entity: sensor.lawn_pgr_forecast_date
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important;
                              border-radius: 14px !important; box-shadow: none !important; }
                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #8fb89a !important; font-size: 11px
                    !important; line-height: 1.4 !important; }

          # â”€â”€ 5-Day Forecast Table â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          # NOTE: HA markdown card strips <style> tags. All CSS must be inline.
          - type: markdown
            content: |
              <table width="100%" style="border-collapse: collapse; font-size: 13px;">
                <tr style="color: #6fcf80; text-align: left; border-bottom: 1px solid rgba(74,163,91,0.25);">
                  <th style="padding: 8px 4px;">Date</th>
                  <th style="padding: 8px 4px; text-align: center;">Wind</th>
                  <th style="padding: 8px 4px; text-align: center;">Rain</th>
                  <th style="padding: 8px 4px; text-align: center;">Spray</th>
                  <th style="padding: 8px 4px; text-align: right;">Est. GDD</th>
                </tr>
                {%- set forecast = state_attr('sensor.lawn_weather_forecast_custom', 'forecast') -%}
                {%- if forecast -%}
                  {%- set base_temp = 5 if 'Cool Season' in states('input_select.lawn_type') else 10 -%}
                  {%- for day in forecast[:5] -%}
                    {%- set wind = day.wind_speed | default(0) | float | round(0) -%}
                    {%- set rain = day.precipitation | default(0) | float | round(1) -%}
                    {%- set max_t = day.temperature | default(0) | float -%}
                    {%- set min_t = day.templow | default(max_t) | float -%}
                    {%- set gdd = [(((max_t + min_t) / 2) - base_temp), 0] | max | round(1) -%}
                    {%- if wind > 25 or rain > 5 -%}
                      {%- set spray_icon = 'ðŸ”´ Poor' -%}
                    {%- elif wind > 15 or rain > 2 -%}
                      {%- set spray_icon = 'ðŸŸ  Marg' -%}
                    {%- else -%}
                      {%- set spray_icon = 'ðŸŸ¢ Good' -%}
                    {%- endif %}
                <tr style="border-bottom: 1px solid rgba(74,163,91,0.1); color: #e8f5eb;">
                  <td style="padding: 8px 4px;">{{ as_timestamp(day.datetime) | timestamp_custom('%a %d') }}</td>
                  <td style="padding: 8px 4px; text-align: center; color: #8fb89a;">{{ wind }} km/h</td>
                  <td style="padding: 8px 4px; text-align: center; color: #8fb89a;">{{ rain }} mm</td>
                  <td style="padding: 8px 4px; text-align: center;">{{ spray_icon }}</td>
                  <td style="padding: 8px 4px; text-align: right; font-family: monospace; font-size: 13px; color: #6fcf80;">+{{ gdd }}</td>
                </tr>
                  {%- endfor -%}
                {%- else -%}
                <tr><td colspan="5" style="padding: 10px; text-align: center; color: #8fb89a;">Forecast data unavailable. Verify your weather integration.</td></tr>
                {%- endif -%}
              </table>
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important;
                          border-radius: 14px !important; box-shadow: none !important; padding: 4px 12px; }

      # â”€â”€ Irrigation & Soil Moisture (NEW) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸ’§ Irrigation & Soil Moisture
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase;
                     letter-spacing: 0.14em !important; color: #4aa35b !important; margin: 0 0 12px 0 !important;
                     border-bottom: 1px solid rgba(74,163,91,0.2); padding-bottom: 8px; }
          - type: horizontal-stack
            cards:
              - type: custom:mushroom-template-card
                primary: ETâ‚€ Estimate
                secondary: >
                  {{ states('sensor.lawn_et_estimate') }} mm/day
                icon: mdi:water-outline
                icon_color: blue
                tap_action:
                  action: more-info
                  entity: sensor.lawn_et_estimate
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important;
                              border-radius: 14px !important; box-shadow: none !important; }
                    .primary { color: #e8f5eb !important; font-weight: 600 !important; }
                    .secondary { color: #8fb89a !important; font-family: monospace !important; }
              - type: custom:mushroom-template-card
                primary: Watering Needed
                secondary: |
                  {% set mins = states('sensor.lawn_irrigation_minutes') | int(0) %}
                  {% if mins > 0 %}{{ mins }} min suggested
                  {% else %}None today{% endif %}
                icon: |
                  {% if states('sensor.lawn_irrigation_minutes') | int(0) > 0 %}mdi:sprinkler-variant{% else %}mdi:sprinkler-off{% endif %}
                icon_color: |
                  {% if states('sensor.lawn_irrigation_minutes') | int(0) > 0 %}cyan{% else %}green{% endif %}
                tap_action:
                  action: more-info
                  entity: sensor.lawn_irrigation_minutes
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important;
                              border-radius: 14px !important; box-shadow: none !important; }
                    .primary { color: #e8f5eb !important; font-weight: 600 !important; }
                    .secondary { color: #8fb89a !important; font-family: monospace !important; }
              - type: custom:mushroom-template-card
                primary: Soil Moisture
                secondary: |
                  {% set m = states('sensor.lawn_avg_soil_moisture') %}
                  {% if m == 'unavailable' %}No probes{% else %}{{ m }}%{% endif %}
                icon: mdi:water-thermometer
                icon_color: |
                  {% set m = states('sensor.lawn_avg_soil_moisture') | float(0) %}
                  {% set t = states('input_number.lawn_moisture_threshold') | float(20) %}
                  {% if states('sensor.lawn_avg_soil_moisture') == 'unavailable' %}grey
                  {% elif m < t %}red{% elif m < t * 1.5 %}orange{% else %}cyan{% endif %}
                tap_action:
                  action: more-info
                  entity: sensor.lawn_avg_soil_moisture
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important;
                              border-radius: 14px !important; box-shadow: none !important; }
                    .primary { color: #e8f5eb !important; font-weight: 600 !important; }
                    .secondary { color: #8fb89a !important; font-family: monospace !important; }

      # â”€â”€ Log Maintenance Tasks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## âœ… Log Maintenance Tasks
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase;
                     letter-spacing: 0.14em !important; color: #4aa35b !important; margin: 0 0 12px 0 !important;
                     border-bottom: 1px solid rgba(74,163,91,0.2); padding-bottom: 8px; }
          - type: entities
            show_header_toggle: false
            entities:
              - entity: input_text.lawn_task_notes
                name: "\U0001F4DD Task Notes"
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important;
                          border-radius: 14px !important; box-shadow: none !important; }
                .card-content { padding: 8px 16px !important; }

                hui-generic-entity-row { color: #8fb89a !important; }

          # â”€â”€ Task Grid (2 columns â€” conditional on product toggles) â”€â”€â”€â”€â”€â”€â”€â”€
          - type: grid
            columns: 2
            square: false
            cards:
              - type: conditional
                conditions:
                  - condition: state
                    entity: input_boolean.lawn_product_mowing
                    state: "on"
                card:
                  type: custom:mushroom-template-card
                  primary: Mowing
                  secondary: |
                    {% set ts = as_timestamp(states('input_datetime.lawn_last_mowing')) | float(0) %}
                    {{ 'N/A' if ts < 86400 else ts | timestamp_custom('%d-%b-%y') }}
                  icon: mdi:mower-on
                  icon_color: green
                  tap_action:
                    action: perform-action
                    perform_action: script.lawn_log_mowing
                    confirmation:
                      text: "Log mowing now?"
                  hold_action:
                    action: more-info
                    entity: input_datetime.lawn_last_mowing
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important; border-radius: 14px
                    !important; box-shadow: none !important; transition:
                    border-color 0.2s, transform 0.15s !important; }

                    ha-card:active { border-color: rgba(111,207,128,0.45)
                    !important; transform: scale(0.97) !important; }

                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #4d7058 !important; font-family:
                    monospace !important; font-size: 11px !important; }
              - type: conditional
                conditions:
                  - condition: state
                    entity: input_boolean.lawn_product_kelp
                    state: "on"
                card:
                  type: custom:mushroom-template-card
                  primary: Kelp
                  secondary: |
                    {% set ts = as_timestamp(states('input_datetime.lawn_last_kelp')) | float(0) %}
                    {{ 'N/A' if ts < 86400 else ts | timestamp_custom('%d-%b-%y') }}
                  icon: mdi:seed
                  icon_color: teal
                  tap_action:
                    action: perform-action
                    perform_action: script.lawn_log_kelp
                    confirmation:
                      text: "Log kelp application?"
                  hold_action:
                    action: more-info
                    entity: input_datetime.lawn_last_kelp
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important; border-radius: 14px
                    !important; box-shadow: none !important; transition:
                    border-color 0.2s, transform 0.15s !important; }

                    ha-card:active { border-color: rgba(111,207,128,0.45)
                    !important; transform: scale(0.97) !important; }

                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #4d7058 !important; font-family:
                    monospace !important; font-size: 11px !important; }
              - type: conditional
                conditions:
                  - condition: state
                    entity: input_boolean.lawn_product_pgr
                    state: "on"
                card:
                  type: custom:mushroom-template-card
                  primary: PGR
                  secondary: |
                    {% set ts = as_timestamp(states('input_datetime.lawn_last_pgr')) | float(0) %}
                    {{ 'N/A' if ts < 86400 else ts | timestamp_custom('%d-%b-%y') }}
                  icon: mdi:expansion-card-variant
                  icon_color: purple
                  tap_action:
                    action: perform-action
                    perform_action: script.lawn_log_pgr
                    confirmation:
                      text: "Log PGR? (Resets GDD to 0)"
                  hold_action:
                    action: more-info
                    entity: input_datetime.lawn_last_pgr
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important; border-radius: 14px
                    !important; box-shadow: none !important; transition:
                    border-color 0.2s, transform 0.15s !important; }

                    ha-card:active { border-color: rgba(111,207,128,0.45)
                    !important; transform: scale(0.97) !important; }

                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #4d7058 !important; font-family:
                    monospace !important; font-size: 11px !important; }
              - type: conditional
                conditions:
                  - condition: state
                    entity: input_boolean.lawn_product_granular_fert
                    state: "on"
                card:
                  type: custom:mushroom-template-card
                  primary: Granular Fert
                  secondary: |
                    {% set ts = as_timestamp(states('input_datetime.lawn_last_granular_fert')) | float(0) %}
                    {{ 'N/A' if ts < 86400 else ts | timestamp_custom('%d-%b-%y') }}
                  icon: mdi:shaker-outline
                  icon_color: brown
                  tap_action:
                    action: perform-action
                    perform_action: script.lawn_log_granular_fert
                    confirmation:
                      text: "Log granular fertiliser?"
                  hold_action:
                    action: more-info
                    entity: input_datetime.lawn_last_granular_fert
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important; border-radius: 14px
                    !important; box-shadow: none !important; transition:
                    border-color 0.2s, transform 0.15s !important; }

                    ha-card:active { border-color: rgba(111,207,128,0.45)
                    !important; transform: scale(0.97) !important; }

                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #4d7058 !important; font-family:
                    monospace !important; font-size: 11px !important; }
              - type: conditional
                conditions:
                  - condition: state
                    entity: input_boolean.lawn_product_liquid_fert
                    state: "on"
                card:
                  type: custom:mushroom-template-card
                  primary: Liquid Fert
                  secondary: |
                    {% set ts = as_timestamp(states('input_datetime.lawn_last_liquid_fert')) | float(0) %}
                    {{ 'N/A' if ts < 86400 else ts | timestamp_custom('%d-%b-%y') }}
                  icon: mdi:water-circle
                  icon_color: blue
                  tap_action:
                    action: perform-action
                    perform_action: script.lawn_log_liquid_fert
                    confirmation:
                      text: "Log liquid fertiliser?"
                  hold_action:
                    action: more-info
                    entity: input_datetime.lawn_last_liquid_fert
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important; border-radius: 14px
                    !important; box-shadow: none !important; transition:
                    border-color 0.2s, transform 0.15s !important; }

                    ha-card:active { border-color: rgba(111,207,128,0.45)
                    !important; transform: scale(0.97) !important; }

                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #4d7058 !important; font-family:
                    monospace !important; font-size: 11px !important; }
              - type: conditional
                conditions:
                  - condition: state
                    entity: input_boolean.lawn_product_humate
                    state: "on"
                card:
                  type: custom:mushroom-template-card
                  primary: Humate
                  secondary: |
                    {% set ts = as_timestamp(states('input_datetime.lawn_last_humate')) | float(0) %}
                    {{ 'N/A' if ts < 86400 else ts | timestamp_custom('%d-%b-%y') }}
                  icon: mdi:cup-water
                  icon_color: deep-orange
                  tap_action:
                    action: perform-action
                    perform_action: script.lawn_log_humate
                    confirmation:
                      text: "Log humate?"
                  hold_action:
                    action: more-info
                    entity: input_datetime.lawn_last_humate
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important; border-radius: 14px
                    !important; box-shadow: none !important; transition:
                    border-color 0.2s, transform 0.15s !important; }

                    ha-card:active { border-color: rgba(111,207,128,0.45)
                    !important; transform: scale(0.97) !important; }

                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #4d7058 !important; font-family:
                    monospace !important; font-size: 11px !important; }
              - type: conditional
                conditions:
                  - condition: state
                    entity: input_boolean.lawn_product_soil_wetter
                    state: "on"
                card:
                  type: custom:mushroom-template-card
                  primary: Soil Wetter
                  secondary: |
                    {% set ts = as_timestamp(states('input_datetime.lawn_last_soil_wetter')) | float(0) %}
                    {{ 'N/A' if ts < 86400 else ts | timestamp_custom('%d-%b-%y') }}
                  icon: mdi:water-percent
                  icon_color: cyan
                  tap_action:
                    action: perform-action
                    perform_action: script.lawn_log_soil_wetter
                    confirmation:
                      text: "Log soil wetter?"
                  hold_action:
                    action: more-info
                    entity: input_datetime.lawn_last_soil_wetter
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important; border-radius: 14px
                    !important; box-shadow: none !important; transition:
                    border-color 0.2s, transform 0.15s !important; }

                    ha-card:active { border-color: rgba(111,207,128,0.45)
                    !important; transform: scale(0.97) !important; }

                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #4d7058 !important; font-family:
                    monospace !important; font-size: 11px !important; }
              - type: conditional
                conditions:
                  - condition: state
                    entity: input_boolean.lawn_product_preemergent
                    state: "on"
                card:
                  type: custom:mushroom-template-card
                  primary: Pre-emergent
                  secondary: |
                    {% set ts = as_timestamp(states('input_datetime.lawn_last_preemergent')) | float(0) %}
                    {{ 'N/A' if ts < 86400 else ts | timestamp_custom('%d-%b-%y') }}
                  icon: mdi:shield-bug
                  icon_color: amber
                  tap_action:
                    action: perform-action
                    perform_action: script.lawn_log_preemergent
                    confirmation:
                      text: "Log pre-emergent?"
                  hold_action:
                    action: more-info
                    entity: input_datetime.lawn_last_preemergent
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important; border-radius: 14px
                    !important; box-shadow: none !important; transition:
                    border-color 0.2s, transform 0.15s !important; }

                    ha-card:active { border-color: rgba(111,207,128,0.45)
                    !important; transform: scale(0.97) !important; }

                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #4d7058 !important; font-family:
                    monospace !important; font-size: 11px !important; }
              - type: conditional
                conditions:
                  - condition: state
                    entity: input_boolean.lawn_product_insecticide
                    state: "on"
                card:
                  type: custom:mushroom-template-card
                  primary: Insecticide
                  secondary: |
                    {% set ts = as_timestamp(states('input_datetime.lawn_last_insecticide')) | float(0) %}
                    {{ 'N/A' if ts < 86400 else ts | timestamp_custom('%d-%b-%y') }}
                  icon: mdi:bug-outline
                  icon_color: red
                  tap_action:
                    action: perform-action
                    perform_action: script.lawn_log_insecticide
                    confirmation:
                      text: "Log insecticide?"
                  hold_action:
                    action: more-info
                    entity: input_datetime.lawn_last_insecticide
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important; border-radius: 14px
                    !important; box-shadow: none !important; transition:
                    border-color 0.2s, transform 0.15s !important; }

                    ha-card:active { border-color: rgba(111,207,128,0.45)
                    !important; transform: scale(0.97) !important; }

                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #4d7058 !important; font-family:
                    monospace !important; font-size: 11px !important; }
              - type: conditional
                conditions:
                  - condition: state
                    entity: input_boolean.lawn_product_fungicide
                    state: "on"
                card:
                  type: custom:mushroom-template-card
                  primary: Fungicide
                  secondary: |
                    {% set ts = as_timestamp(states('input_datetime.lawn_last_fungicide')) | float(0) %}
                    {{ 'N/A' if ts < 86400 else ts | timestamp_custom('%d-%b-%y') }}
                  icon: mdi:mushroom-outline
                  icon_color: pink
                  tap_action:
                    action: perform-action
                    perform_action: script.lawn_log_fungicide
                    confirmation:
                      text: "Log fungicide?"
                  hold_action:
                    action: more-info
                    entity: input_datetime.lawn_last_fungicide
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important; border-radius: 14px
                    !important; box-shadow: none !important; transition:
                    border-color 0.2s, transform 0.15s !important; }

                    ha-card:active { border-color: rgba(111,207,128,0.45)
                    !important; transform: scale(0.97) !important; }

                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #4d7058 !important; font-family:
                    monospace !important; font-size: 11px !important; }
              - type: conditional
                conditions:
                  - condition: state
                    entity: input_boolean.lawn_product_herbicide
                    state: "on"
                card:
                  type: custom:mushroom-template-card
                  primary: Herbicide
                  secondary: |
                    {% set ts = as_timestamp(states('input_datetime.lawn_last_herbicide')) | float(0) %}
                    {{ 'N/A' if ts < 86400 else ts | timestamp_custom('%d-%b-%y') }}
                  icon: mdi:sprout-outline
                  icon_color: lime
                  tap_action:
                    action: perform-action
                    perform_action: script.lawn_log_herbicide
                    confirmation:
                      text: "Log herbicide?"
                  hold_action:
                    action: more-info
                    entity: input_datetime.lawn_last_herbicide
                card_mod:
                  style: >
                    ha-card { background: #1c2b22 !important; border: 1px solid
                    rgba(74,163,91,0.18) !important; border-radius: 14px
                    !important; box-shadow: none !important; transition:
                    border-color 0.2s, transform 0.15s !important; }

                    ha-card:active { border-color: rgba(111,207,128,0.45)
                    !important; transform: scale(0.97) !important; }

                    .primary { color: #e8f5eb !important; font-weight: 600
                    !important; }

                    .secondary { color: #4d7058 !important; font-family:
                    monospace !important; font-size: 11px !important; }

      # â”€â”€ Inventory Status (NEW) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸ“¦ Inventory Status
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase;
                     letter-spacing: 0.14em !important; color: #4aa35b !important; margin: 0 0 12px 0 !important;
                     border-bottom: 1px solid rgba(74,163,91,0.2); padding-bottom: 8px; }
          - type: custom:mushroom-template-card
            primary: |
              {% set count = states('sensor.lawn_low_stock_items') | int(0) %}
              {% if count == 0 %}All Products Stocked{% else %}{{ count }} Product(s) Low{% endif %}
            secondary: "{{ state_attr('sensor.lawn_low_stock_items', 'details') }}"
            icon: |
              {% if states('sensor.lawn_low_stock_items') | int(0) > 0 %}mdi:alert-circle{% else %}mdi:check-circle{% endif %}
            icon_color: |
              {% if states('sensor.lawn_low_stock_items') | int(0) > 0 %}orange{% else %}green{% endif %}
            tap_action:
              action: more-info
              entity: sensor.lawn_low_stock_items
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important;
                          border-radius: 14px !important; box-shadow: none !important; }
                .primary { color: #e8f5eb !important; font-weight: 600 !important; }
                .secondary { color: #8fb89a !important; font-size: 11px !important; }
          - type: entities
            title: Stock Levels
            show_header_toggle: false
            entities:
              - type: conditional
                conditions:
                  - entity: input_boolean.lawn_product_kelp
                    state: "on"
                row:
                  entity: input_number.lawn_stock_kelp
              - type: conditional
                conditions:
                  - entity: input_boolean.lawn_product_pgr
                    state: "on"
                row:
                  entity: input_number.lawn_stock_pgr
              - type: conditional
                conditions:
                  - entity: input_boolean.lawn_product_granular_fert
                    state: "on"
                row:
                  entity: input_number.lawn_stock_granular_fert
              - type: conditional
                conditions:
                  - entity: input_boolean.lawn_product_liquid_fert
                    state: "on"
                row:
                  entity: input_number.lawn_stock_liquid_fert
              - type: conditional
                conditions:
                  - entity: input_boolean.lawn_product_humate
                    state: "on"
                row:
                  entity: input_number.lawn_stock_humate
              - type: conditional
                conditions:
                  - entity: input_boolean.lawn_product_soil_wetter
                    state: "on"
                row:
                  entity: input_number.lawn_stock_soil_wetter
              - type: conditional
                conditions:
                  - entity: input_boolean.lawn_product_preemergent
                    state: "on"
                row:
                  entity: input_number.lawn_stock_preemergent
              - type: conditional
                conditions:
                  - entity: input_boolean.lawn_product_insecticide
                    state: "on"
                row:
                  entity: input_number.lawn_stock_insecticide
              - type: conditional
                conditions:
                  - entity: input_boolean.lawn_product_fungicide
                    state: "on"
                row:
                  entity: input_number.lawn_stock_fungicide
              - type: conditional
                conditions:
                  - entity: input_boolean.lawn_product_herbicide
                    state: "on"
                row:
                  entity: input_number.lawn_stock_herbicide
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

                .card-header { color: #6fcf80 !important; font-weight: 700
                !important; }

                hui-generic-entity-row { color: #e8f5eb !important; }

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # VIEW 2: SETTINGS
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - title: Settings
    path: settings
    icon: mdi:cog
    badges: []
    type: masonry
    theme: Mushroom
    background:
      opacity: 100
      alignment: center
      size: cover
      repeat: no-repeat
      attachment: fixed
      image:
        media_content_id: /local/turf_bg.svg
        media_content_type: ''
        metadata:
          navigateIds:
            - {}
            - media_content_type: ''
              media_content_id: __MANUAL_ENTRY__
    card_mod:
      style:
        .: |
          :host {
            --primary-background-color: #0e1614;
            --secondary-background-color: #162019;
            --card-background-color: #1c2b22;
            --primary-text-color: #e8f5eb;
            --secondary-text-color: #8fb89a;
            --primary-color: #4aa35b;
            --accent-color: #6fcf80;
          }
    cards:
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸ§ª Enabled Products
              Toggle products on/off to show or hide them from the Dashboard and Inventory views. Disabled products also suppress their reminders.
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase; color: #4aa35b !important; margin: 0
                0 8px 0 !important; }
          - type: entities
            show_header_toggle: true
            entities:
              - entity: input_boolean.lawn_product_mowing
                name: "Mowing"
                icon: mdi:mower-on
              - entity: input_boolean.lawn_product_kelp
                name: "Kelp"
                icon: mdi:seed
              - entity: input_boolean.lawn_product_pgr
                name: "PGR"
                icon: mdi:expansion-card-variant
              - entity: input_boolean.lawn_product_granular_fert
                name: "Granular Fert"
                icon: mdi:shaker-outline
              - entity: input_boolean.lawn_product_liquid_fert
                name: "Liquid Fert"
                icon: mdi:water-circle
              - entity: input_boolean.lawn_product_humate
                name: "Humate"
                icon: mdi:cup-water
              - entity: input_boolean.lawn_product_soil_wetter
                name: "Soil Wetter"
                icon: mdi:water-percent
              - entity: input_boolean.lawn_product_preemergent
                name: "Pre-emergent"
                icon: mdi:shield-bug
              - entity: input_boolean.lawn_product_insecticide
                name: "Insecticide"
                icon: mdi:bug-outline
              - entity: input_boolean.lawn_product_fungicide
                name: "Fungicide"
                icon: mdi:mushroom-outline
              - entity: input_boolean.lawn_product_herbicide
                name: "Herbicide"
                icon: mdi:sprout-outline
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

                hui-generic-entity-row { color: #e8f5eb !important; }
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## âš–ï¸ Product Units
              Set each product's measurement unit. This controls the rate (/100mÂ²), stock level, and logbook display.
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase; color: #4aa35b !important; margin: 0
                0 8px 0 !important; }
          - type: entities
            show_header_toggle: false
            entities:
              - entity: input_select.lawn_unit_kelp
                name: "Kelp"
              - entity: input_select.lawn_unit_granular_fert
                name: "Granular Fert"
              - entity: input_select.lawn_unit_liquid_fert
                name: "Liquid Fert"
              - entity: input_select.lawn_unit_humate
                name: "Humate"
              - entity: input_select.lawn_unit_soil_wetter
                name: "Soil Wetter"
              - entity: input_select.lawn_unit_preemergent
                name: "Pre-emergent"
              - entity: input_select.lawn_unit_insecticide
                name: "Insecticide"
              - entity: input_select.lawn_unit_fungicide
                name: "Fungicide"
              - entity: input_select.lawn_unit_herbicide
                name: "Herbicide"
              - entity: input_select.lawn_unit_pgr
                name: "PGR"
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

                hui-generic-entity-row { color: #e8f5eb !important; }
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸ“ Lawn Areas
              Set unused areas to 0mÂ² to hide them
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase; color: #4aa35b !important; margin: 0
                0 8px 0 !important; }
          - type: entities
            title: Area Configuration
            show_header_toggle: false
            entities:
              - entity: input_text.lawn_area_1_name
              - entity: input_number.lawn_area_1_size
              - entity: input_text.lawn_area_2_name
              - entity: input_number.lawn_area_2_size
              - entity: input_text.lawn_area_3_name
              - entity: input_number.lawn_area_3_size
              - entity: input_text.lawn_area_4_name
              - entity: input_number.lawn_area_4_size
              - entity: input_text.lawn_area_5_name
              - entity: input_number.lawn_area_5_size
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

                .card-header { color: #6fcf80 !important; font-weight: 700
                !important; }

                hui-generic-entity-row { color: #e8f5eb !important; }
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸ”” Notification Settings
              Enable or disable task reminders
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase; color: #4aa35b !important; margin: 0
                0 8px 0 !important; }
          - type: entities
            show_header_toggle: true
            entities:
              - entity: input_boolean.lawn_notify_mowing
                name: Mowing Reminders
              - entity: input_boolean.lawn_notify_kelp
                name: Kelp Reminders
              - entity: input_boolean.lawn_notify_granular_fert
                name: Granular Fert Reminders
              - entity: input_boolean.lawn_notify_liquid_fert
                name: Liquid Fert Reminders
              - entity: input_boolean.lawn_notify_humate
                name: Humate Reminders
              - entity: input_boolean.lawn_notify_soil_wetter
                name: Soil Wetter Reminders
              - entity: input_boolean.lawn_notify_preemergent
                name: Pre-emergent Reminders
              - entity: input_boolean.lawn_notify_insecticide
                name: Insecticide Reminders
              - entity: input_boolean.lawn_notify_fungicide
                name: Fungicide Reminders
              - entity: input_boolean.lawn_notify_herbicide
                name: Herbicide Reminders
              - entity: input_boolean.lawn_notify_pgr
                name: PGR Reminders
              - entity: input_boolean.lawn_notify_low_stock
                name: Low Stock Alerts
              - entity: input_boolean.lawn_notify_irrigation
                name: Irrigation Suggestions
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

                hui-generic-entity-row { color: #e8f5eb !important; }
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸ’§ Application Rates
              Rate per 100mÂ² â€” unit set in Product Units above
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase; color: #4aa35b !important; margin: 0
                0 8px 0 !important; }
          - type: entities
            show_header_toggle: false
            entities:
              - entity: input_number.lawn_rate_granular_fert
              - entity: input_number.lawn_rate_liquid_fert
              - entity: input_number.lawn_rate_kelp
              - entity: input_number.lawn_rate_humate
              - entity: input_number.lawn_rate_soil_wetter
              - entity: input_number.lawn_rate_preemergent
              - entity: input_number.lawn_rate_insecticide
              - entity: input_number.lawn_rate_fungicide
              - entity: input_number.lawn_rate_herbicide
              - entity: input_number.lawn_rate_pgr
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

                hui-generic-entity-row { color: #e8f5eb !important; }
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## â±ï¸ Task Intervals (Days)
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase; color: #4aa35b !important; margin: 0
                0 8px 0 !important; }
          - type: entities
            show_header_toggle: false
            entities:
              - entity: input_number.lawn_interval_mowing
              - entity: input_number.lawn_interval_kelp
              - entity: input_number.lawn_interval_granular_fert
              - entity: input_number.lawn_interval_liquid_fert
              - entity: input_number.lawn_interval_humate
              - entity: input_number.lawn_interval_soil_wetter
              - entity: input_number.lawn_interval_preemergent
              - entity: input_number.lawn_interval_insecticide
              - entity: input_number.lawn_interval_fungicide
              - entity: input_number.lawn_interval_herbicide
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

                hui-generic-entity-row { color: #e8f5eb !important; }
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸŒ± GDD / PGR Settings
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase; color: #4aa35b !important; margin: 0
                0 8px 0 !important; }
          - type: entities
            show_header_toggle: false
            entities:
              - entity: input_number.pgr_gdd_target
              - entity: input_number.pgr_gdd_accumulated
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

                hui-generic-entity-row { color: #e8f5eb !important; }
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸš¿ Irrigation Settings
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase; color: #4aa35b !important; margin: 0
                0 8px 0 !important; }
          - type: entities
            show_header_toggle: false
            entities:
              - entity: input_number.lawn_sprinkler_precip_rate
              - entity: input_number.lawn_moisture_threshold
              - entity: input_number.lawn_stock_alert_threshold
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

                hui-generic-entity-row { color: #e8f5eb !important; }
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸ§ª Nitrogen Tracking
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase; color: #4aa35b !important; margin: 0
                0 8px 0 !important; }
          - type: entities
            show_header_toggle: false
            entities:
              - entity: input_number.lawn_nitrogen_applied_season
              - entity: input_number.lawn_granular_fert_n_fraction
              - entity: input_number.lawn_liquid_fert_n_fraction
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

                hui-generic-entity-row { color: #e8f5eb !important; }
          - type: custom:mushroom-template-card
            primary: Reset Seasonal N Counter
            secondary: >-
              Current: {{ states('input_number.lawn_nitrogen_applied_season') }} kg N
            icon: mdi:atom-variant
            icon_color: red
            tap_action:
              action: perform-action
              perform_action: script.lawn_reset_nitrogen_season
              confirmation:
                text: Reset seasonal nitrogen counter to zero?
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }
                .primary { color: #e8f5eb !important; font-weight: 600 !important; }
                .secondary { color: #8fb89a !important; font-family: monospace !important; }

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # VIEW 3: SEASON REVIEW (NEW)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # Requires: custom:apexcharts-card (HACS) for the dual-axis chart.
  # The statistics-graph card is built-in and works without HACS.
  - title: Season Review
    path: season
    icon: mdi:chart-areaspline
    badges: []
    type: masonry
    theme: Mushroom
    background:
      opacity: 100
      alignment: center
      size: cover
      repeat: no-repeat
      attachment: fixed
      image:
        media_content_id: /local/turf_bg.svg
        media_content_type: ''
        metadata:
          navigateIds:
            - {}
            - media_content_type: ''
              media_content_id: __MANUAL_ENTRY__
    card_mod:
      style:
        .: |
          :host {
            --primary-background-color: #0e1614;
            --secondary-background-color: #162019;
            --card-background-color: #1c2b22;
            --primary-text-color: #e8f5eb;
            --secondary-text-color: #8fb89a;
            --primary-color: #4aa35b;
            --accent-color: #6fcf80;
          }
    cards:
      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸ“Š Season Review
              Long-term temperature trends and nitrogen application history
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase;
                     letter-spacing: 0.14em !important; color: #4aa35b !important; margin: 0 0 12px 0 !important;
                     border-bottom: 1px solid rgba(74,163,91,0.2); padding-bottom: 8px; }

          # â”€â”€ Monthly Temperature Trends (built-in card) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          - type: statistics-graph
            title: "Monthly Temperature Trends (12 months)"
            entities:
              - entity: sensor.weatherflow_sensors_temperature
                name: Ambient Temp
            stat_types:
              - mean
              - min
              - max
            period: month
            days_to_show: 365
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

                .card-header { color: #6fcf80 !important; }

      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸ§ª Nitrogen vs Temperature
              Requires [apexcharts-card](https://github.com/RomRider/apexcharts-card) from HACS
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase; color: #4aa35b !important; margin: 0
                0 8px 0 !important; }

          # â”€â”€ Dual-Axis Chart: N Applied vs Temp (HACS: apexcharts-card) â”€â”€â”€
          - type: custom:apexcharts-card
            header:
              title: "Nitrogen Applied vs Avg Temperature"
              show: true
              show_states: true
              colorize_states: true
            apex_config:
              chart:
                type: area
                height: 280
              tooltip:
                shared: true
              legend:
                show: true
            graph_span: 365d
            span:
              end: day
            series:
              - entity: input_number.lawn_nitrogen_applied_season
                name: Cumulative N (kg)
                type: area
                color: "#4aa35b"
                opacity: 0.3
                stroke_width: 2
                group_by:
                  func: last
                  duration: 7d
                yaxis_id: nitrogen
              - entity: sensor.weatherflow_sensors_temperature
                name: Avg Temp (Â°C)
                type: line
                color: "#e07843"
                stroke_width: 2
                group_by:
                  func: avg
                  duration: 7d
                yaxis_id: temp
            yaxis:
              - id: nitrogen
                opposite: false
                min: 0
                apex_config:
                  title:
                    text: "Nitrogen (kg)"
                    style:
                      color: "#4aa35b"
              - id: temp
                opposite: true
                apex_config:
                  title:
                    text: "Temperature (Â°C)"
                    style:
                      color: "#e07843"
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

      - type: vertical-stack
        cards:
          - type: markdown
            content: |
              ## ðŸ“ˆ GDD Accumulation History
            card_mod:
              style: >
                ha-card { background: transparent; box-shadow: none; border:
                none; }

                h2 { font-size: 13px !important; font-weight: 700 !important;
                text-transform: uppercase; color: #4aa35b !important; margin: 0
                0 8px 0 !important; }
          - type: custom:apexcharts-card
            header:
              title: "Daily GDD (Past 90 Days)"
              show: true
            graph_span: 90d
            span:
              end: day
            series:
              - entity: sensor.lawn_gdd_today
                name: Daily GDD
                type: column
                color: "#6fcf80"
                group_by:
                  func: max
                  duration: 1d
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important; border-radius: 14px !important;
                box-shadow: none !important; }

          # â”€â”€ Season Summary Snapshot â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          - type: custom:mushroom-template-card
            primary: Season Summary
            secondary: |
              Total N: {{ states('input_number.lawn_nitrogen_applied_season') }} kg Â·
              Current GDD: {{ states('input_number.pgr_gdd_accumulated') }} Â·
              ETâ‚€ today: {{ states('sensor.lawn_et_estimate') }} mm
            icon: mdi:leaf
            icon_color: green
            tap_action:
              action: none
            card_mod:
              style: >
                ha-card { background: #1c2b22 !important; border: 1px solid
                rgba(74,163,91,0.18) !important;
                          border-radius: 14px !important; box-shadow: none !important; }
                .primary { color: #e8f5eb !important; font-weight: 600 !important; }
                .secondary { color: #8fb89a !important; font-family: monospace !important; font-size: 11px !important; }
